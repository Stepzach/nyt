<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
    </style>
</head>
<body>
    <h1>Crossword Leaderboard</h1>
    <table id="leaderboardTable">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Name</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody>
            <!-- Leaderboard entries will be added here -->
        </tbody>
    </table>

    <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-database-compat.js"></script>

    <script>
        // Firebase config (use your actual config)
       const firebaseConfig = {
  apiKey: "AIzaSyBukFC83UnD1r6SaiSv-M95dz9PINFhqWU",
  authDomain: "crosswordleader.firebaseapp.com",
  databaseURL: "https://crosswordleader-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "crosswordleader",
  storageBucket: "crosswordleader.firebasestorage.app",
  messagingSenderId: "762979733536",
  appId: "1:762979733536:web:2f8afc76b9dc1156942c45"
};

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const leaderboardRef = database.ref('leaderboard');

        // Get the leaderboard table body
        const leaderboardTableBody = document.getElementById('leaderboardTable').getElementsByTagName('tbody')[0];

        // Function to display and update the leaderboard
        function displayLeaderboard(data) {
            leaderboardTableBody.innerHTML = ''; // Clear existing entries

            // Convert data to an array, sort it, and then display
            const leaderboardArray = [];
            for (const key in data) {
                leaderboardArray.push({
                    key: key,
                    name: data[key].name,
                    time: data[key].time
                });
            }
          leaderboardArray.sort((a, b) => {
    // Convert times to seconds for proper sorting
    const timeToSeconds = (time) => {
        const parts = time.split(':').map(Number);
        return parts[0] * 60 + parts[1];
    };

    const timeA = timeToSeconds(a.time);
    const timeB = timeToSeconds(b.time);

    return timeA - timeB;
});

            // Add new entries to the table
            leaderboardArray.forEach((entry, index) => {
                const row = leaderboardTableBody.insertRow();
                const rankCell = row.insertCell();
                const nameCell = row.insertCell();
                const timeCell = row.insertCell();

                rankCell.textContent = index + 1;
                nameCell.textContent = entry.name;
                timeCell.textContent = entry.time;
            });
        }

        // Listen for changes to the leaderboard data
leaderboardRef.orderByChild('time').on('value', (snapshot) => {
    const data = snapshot.val();
    if (data) {
        displayLeaderboard(data);
    }
});
    </script>
</body>
</html>
